---
apiVersion: composite.clouddatabase.allianz.io/v1alpha1
kind: DynatraceDashboard
metadata:
  name: dynatrace-deployment
  namespace: customer
spec:
  parameters:
    github_token: "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"
    customer_repository: "preprod-mz-az-tech-dagobert"
    stage: "preprod"
    dynatrace_management_zone: "me-az-tech-dagobert"
    dynatrace_alerting_profile: "apso-mz-az-tech-dagobert-Default"
    snow_f_group: "AZD.BIT-KVI5.CO-AZDCLOUD"
    email_recepients: extern.binder_david@allianz.de
    db_tags:
      - "[AWS]dynatrace"

      - key: customer_repository
        value: cloud-db-crossplane-int-8dvns
      - key: stage
        value: preprod
      - key: dynatrace_management_zone
        value: mz-az-fcp-cloud_db_crossplane_int_8dvns

---
apiVersion: composite.clouddatabase.allianz.io/v1alpha1
kind: DynatraceDashboard
metadata:
  name: dynatrace-deployment
  namespace: customer
spec:
  parameters:
    github_token: "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"
    stage: "preprod"
    dynatrace_alerting_profile: "apso-mz-az-tech-dagobert-Default"
    db_tags:
      - "[AWS]dynatrace"

      From Field Path:  metadata.annotations[platform.cloud.allianz/profile-name]
      To Field Path:    spec.forProvider.vars[2].value
      Type:             FromCompositeFieldPath
      From Field Path:  metadata.annotations[dynatrace.platform.cloud.allianz/mz-name]
      To Field Path:    spec.forProvider.vars[4].value
      Type:             FromCompositeFieldPath