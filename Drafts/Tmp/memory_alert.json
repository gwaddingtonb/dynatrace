{
  "schemaId": "builtin:anomaly-detection.metric-events",
  "schemaVersion": "1.0.14",
  "scope": "environment",
  "value": {
    "enabled": true,
    "summary": "${MANAGEMENT_ZONE}_memory_alert",
    "queryDefinition": {
      "type": "METRIC_KEY",
      "metricKey": "builtin:cloud.aws.rds.memory.freeable",
      "aggregation": "AVG",
      "managementZone": null,
      "queryOffset": null,
      "entityFilter": {
        "dimensionKey": "dt.entity.relational_database_service",
        "conditions": [
          {
            "type": "NAME",
            "operator": "STARTS_WITH",
            "value": "aims"
          },
          {
            "type": "MANAGEMENT_ZONE",
            "operator": "EQUALS",
            "value": "${MANAGEMENT_ZONE}"
          }
        ]
      },
      "dimensionFilter": []
    },    
    "modelProperties": {
      "type": "STATIC_THRESHOLD",
      "threshold": 50,
      "alertOnNoData": false,
      "alertCondition": "BELOW",
      "violatingSamples": 5,
      "samples": 30,
      "dealertingSamples": 30
    },
    "eventTemplate": {
      "title": "${MANAGEMENT_ZONE}_memory_alert_${DB_CLUSTER_INSTANCE_NAME0}",
      "description": "Custom Alert for high Memory usage",
      "eventType": "CUSTOM_ALERT",
      "davisMerge": false,
      "metadata": []
    },
    "eventEntityDimensionKey": "dt.entity.relational_database_service",
    "legacyId": "cc1d84a2-a124-4951-b698-318dba8804f4"
  }
}